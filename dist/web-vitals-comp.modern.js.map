{"version":3,"file":"web-vitals-comp.modern.js","sources":["../src/index.js"],"sourcesContent":["import { getCLS, getLCP, getFID } from 'web-vitals';\n\ncustomElements.define(\n\t'web-vitals',\n\tclass extends HTMLElement {\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.dev = this.hasAttribute('dev');\n\t\t\tthis.template = this.logFunction().toString();\n\t\t\tvar el = document.createElement('script');\n\t\t\tel.innerHTML = this.template;\n\t\t\tvar s = this.attachShadow({ mode: 'open' });\n\t\t\tthis.dev && s.appendChild(el);\n\t\t}\n\t\tlogFunction() {\n\t\t\tdocument.readyState === 'loading'\n\t\t\t\t? document.addEventListener('DOMContentLoaded', webv)\n\t\t\t\t: webv();\n\t\t\tfunction webv() {\n\t\t\t\t// prettier-ignore\n\t\t\t\tconsole.info('What is this? Check link -> https://web.dev/vitals/');\n\t\t\t\tgetLCP(log);\n\t\t\t\tgetCLS(log, true);\n\t\t\t\tgetFID(log, true);\n\t\t\t}\n\n\t\t\tfunction log(data) {\n\t\t\t\tvar title = data.name;\n\t\t\t\tif (data.isFinal) title = data.name + ' (Final)';\n\t\t\t\tconsole.groupCollapsed('Web Vitals Category: ' + title);\n\n\t\t\t\tlogValue(data);\n\t\t\t\tlogLastEntry(data.entries);\n\n\t\t\t\tconsole.log('Full ' + data.name + ' Metric: ', data); // log whole object anyways\n\t\t\t\tconsole.groupEnd();\n\t\t\t}\n\n\t\t\tfunction logLastEntry(entries) {\n\t\t\t\t// log most recent entry instead of the entry array, this prevents eager evaluation\n\t\t\t\tvar lastEntryIndex = entries.length - 1;\n\t\t\t\tvar entry = entries[lastEntryIndex];\n\t\t\t\tif (entry.element) console.log('Element: ', entry.element);\n\t\t\t\tconsole.log('Most recent entry: ', entry);\n\t\t\t}\n\n\t\t\tfunction logValue({ value, delta, name }) {\n\t\t\t\t// calculates acceptable values\n\t\t\t\tvar ts = 0; // timestamp\n\t\t\t\tvar state = false;\n\t\t\t\tif (name === 'LCP') {\n\t\t\t\t\tts = value / 1000;\n\t\t\t\t\tif (ts > 2.5) {\n\t\t\t\t\t\t// prettier-ignore\n\t\t\t\t\t\tconsole.warn('Paint is happening too late (Threshold < 2.5s)');\n\t\t\t\t\t}\n\t\t\t\t\tconsole.info('Timestamp (in Seconds): ', ts);\n\t\t\t\t\tdelta !== value && console.log('Change: ', delta);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (name === 'FID') {\n\t\t\t\t\tts = value;\n\t\t\t\t\tif (ts > 100) {\n\t\t\t\t\t\t// prettier-ignore\n\t\t\t\t\t\tconsole.warn('Input delay is too high (Threshold < 100ms)');\n\t\t\t\t\t}\n\t\t\t\t\tconsole.info('Timestamp (in Milliseconds): ', ts);\n\t\t\t\t\tdelta !== value && console.log('Change: ', delta);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (name === 'CLS') {\n\t\t\t\t\tif (value > 0.1) {\n\t\t\t\t\t\t// prettier-ignore\n\t\t\t\t\t\tconsole.warn('Cumulative shift is past threshold (Threshold < 0.1)');\n\t\t\t\t\t}\n\t\t\t\t\tconsole.info('Layout Shift: ', value);\n\t\t\t\t\tdelta !== value && console.log('Change: ', delta);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn {};\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["customElements","define","HTMLElement","constructor","super","this","dev","hasAttribute","template","logFunction","toString","el","document","createElement","innerHTML","s","attachShadow","mode","appendChild","webv","console","info","getLCP","log","getCLS","getFID","data","entries","entry","title","name","isFinal","groupCollapsed","value","delta","ts","warn","logValue","length","element","groupEnd","readyState","addEventListener"],"mappings":"4DAEAA,eAAeC,OACd,aACA,cAAcC,YACbC,cACCC,QACAC,KAAKC,IAAMD,KAAKE,aAAa,OAC7BF,KAAKG,SAAWH,KAAKI,cAAcC,WACnC,IAAIC,EAAKC,SAASC,cAAc,UAChCF,EAAGG,UAAYT,KAAKG,SACpB,IAAIO,EAAIV,KAAKW,aAAa,CAAEC,KAAM,SAClCZ,KAAKC,KAAOS,EAAEG,YAAYP,GAE3BF,cAIC,SAASU,IAERC,QAAQC,KAAK,uDACbC,EAAOC,GACPC,EAAOD,GAAK,GACZE,EAAOF,GAAK,GAGb,SAASA,EAAIG,GACZ,IAWqBC,EAGjBC,EAdAC,EAAQH,EAAKI,KACbJ,EAAKK,UAASF,EAAQH,EAAKI,KAAO,YACtCV,QAAQY,eAAe,wBAA0BH,GAiBlD,UAAkBI,MAAEA,EAAFC,MAASA,EAATJ,KAAgBA,IAEjC,IAAIK,EAAK,EAEI,QAATL,IACHK,EAAKF,EAAQ,KACJ,KAERb,QAAQgB,KAAK,kDAEdhB,QAAQC,KAAK,2BAA4Bc,GACzCD,IAAUD,GAASb,QAAQG,IAAI,WAAYW,IAG/B,QAATJ,IACHK,EAAKF,GACI,KAERb,QAAQgB,KAAK,+CAEdhB,QAAQC,KAAK,gCAAiCc,GAC9CD,IAAUD,GAASb,QAAQG,IAAI,WAAYW,IAG/B,QAATJ,IACCG,EAAQ,IAEXb,QAAQgB,KAAK,wDAEdhB,QAAQC,KAAK,iBAAkBY,GAC/BC,IAAUD,GAASb,QAAQG,IAAI,WAAYW,IA7C5CG,CAASX,IAULE,GAHiBD,EANRD,EAAKC,SAQGA,EAAQW,OAAS,IAE5BC,SAASnB,QAAQG,IAAI,YAAaK,EAAMW,SAClDnB,QAAQG,IAAI,sBAAuBK,GATnCR,QAAQG,IAAI,QAAUG,EAAKI,KAAO,YAAaJ,GAC/CN,QAAQoB,WApBe,YAAxB5B,SAAS6B,WACN7B,SAAS8B,iBAAiB,mBAAoBvB,GAC9CA"}